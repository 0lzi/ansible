- name: Set Quota
  openstack.cloud.quota:
    cloud:
      auth:
        auth_url: "{{ auth_url }}"
        username: "{{ username }}"
        password: "{{ password }}"
        project_name: "{{ project_name }}"
        project_domain_name: "{{ item.project_domain }}"
        user_domain_name: "{{ item.user_domain }}"
      region_name: "{{ region_name }}"
    name: "{{ item.project }}"
    floating_ips: "{{ item.floating_ips }}"
    networks: "{{ item.networks }}"
    ports: "{{ item.ports }}"
    rbac_policies: "{{ item.rbac_policies }}"
    routers: "{{ item.routers }}"
    subnets: "{{ item.subnets }}"
    subnet_pools: "{{ item.subnet_pools }}"
    security_group_rules: "{{ item.security_group_rules }}"
    security_groups: "{{ item.security_groups }}"
    backup_gigabytes: "{{ item.backup_gigabytes }}"
    backups: "{{ item.backups }}"
    gigabytes: "{{ item.gigabytes }}"
    groups: "{{ item.groups }}"
    # pools: "{{ item.pools }}"
    per_volume_gigabytes: "{{ item.per_volume_gigabytes }}"
    snapshots: "{{ item.snapshots }}"
    volumes: "{{ item.volumes }}"
    cores: "{{ item.cores }}"
    instances: "{{ item.instances }}"
    key_pairs: "{{  item.key_pairs }}"
    metadata_items: "{{ item.metadata_items }}"
    ram: "{{ item.ram }}"
    server_groups: "{{ item.server_groups }}"
    server_group_members: "{{ item.server_group_members }}"
  with_items: "{{ quotas }}"
